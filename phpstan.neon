includes:
    - vendor/phpstan/phpstan/conf/bleedingEdge.neon

parameters:
    level: 8
    paths:
        - src
    
    # Treat PHPDoc types as uncertain to allow more flexibility
    treatPhpDocTypesAsCertain: false
    
    # Report unmatched ignored errors
    reportUnmatchedIgnoredErrors: false
    
    # Ignore some complex generic type issues that are difficult to solve
    ignoreErrors:
        # Generic type covariance issues with Promise
        - '#Template type T on class .+ is not covariant#'
        
        # Allow mixed returns in Promise static methods where type inference is complex
        - '#should return .+PromiseInterface<.+> but returns .+Promise<mixed>#'
        - '#should return .+PromiseInterface<array<.+>> but returns .+PromiseInterface<array.+>#'
        
        # Complex callable type matching in Promise handlers
        - '#Parameter \#1 of callable callable\(.+\) expects .+, .+ given#'
        
        # Ignore curl_setopt_array strict type issues (values are runtime validated)
        - '#Parameter \#2 \$options of function curl_setopt_array expects#'
        
        # Property only written issues for future use
        - '#Property .+::\$cancelFn is never read, only written#'
        
        # Anonymous function void return issues
        - '#Anonymous function with return type void returns null#'
        
        # Generic interface types in properties/parameters
        - '#with generic interface .+PromiseInterface but does not specify its types#'
        
        # If condition always false in race conditions handling
        - '#If condition is always false#'
        
        # Promise::wait() return type complexity - valid at runtime
        - '#Method .+Promise::wait\(\) should return T but returns T\|Throwable\|null#'
        
        # Promise::catch() covariance - acceptable for Promise/A+ pattern
        - '#Method .+Promise::catch\(\) should return .+ but returns#'
